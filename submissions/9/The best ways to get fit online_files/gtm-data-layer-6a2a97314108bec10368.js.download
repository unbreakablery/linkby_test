(window.webpackJsonp_gp_web_frontend=window.webpackJsonp_gp_web_frontend||[]).push([["gtm-data-layer"],{"./src/ts/components/gtm-data-layer/gtm-data-layer.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{gtmDataLayerComponent:()=>o,init:()=>r});var n=a("../shared-types/frontend/core/store.ts");const o=e=>({bindEvents:()=>(window.dataLayer=window.dataLayer||[],(e=>{window.dataLayer=window.dataLayer||[];(()=>{let t;e.subscribe(()=>{const{dataLayerPush:a,history:o}=e.getState();t!==o[n.U.DataLayerPush]&&(t=o[n.U.DataLayerPush],window.dataLayer.push({action:void 0,label:void 0,category:void 0,event:void 0},a))})})();const t=e.subscribe(()=>{var a,n;const o=e.getState();if(o.crm.receive){let e;if(null===(a=o.crm.receive)||void 0===a?void 0:a.message){e=((null===(n=o.crm.receive.message)||void 0===n?void 0:n.split(",").find(e=>e.includes("id::")))||"").replace("id::","")}const r={action:"click - sign-up",label:"newsletter",event:"newsletter-sign-up",category:"TO Engagement",crmHashedEmail:e};window.dataLayer.push({action:void 0,label:void 0,category:void 0,event:void 0},r),t()}})})(e),document.addEventListener("click",e=>{const t=e.target;if(!t)return;const a=t.closest("[data-data-layer]");if(!a)return;const{dataLayer:n}=a.dataset||{};if(n)try{const e=JSON.parse(n);switch(e.triggerOn){case 0:window.dataLayer.push({action:void 0,label:void 0,category:void 0,event:void 0},e.payload)}}catch(e){}}),{})}),r=(e,t)=>{const a=Math.floor(1e4*Math.random());return{listeners:o(t).bindEvents(),componentId:"gtm-data-layer-"+a}}}}]);