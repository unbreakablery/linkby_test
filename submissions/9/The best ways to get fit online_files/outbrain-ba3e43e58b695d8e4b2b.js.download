(window.webpackJsonp_gp_web_frontend=window.webpackJsonp_gp_web_frontend||[]).push([["outbrain"],{"./src/ts/components/outbrain/outbrain.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{outbrainComponent:()=>a,init:()=>d});var o=n("../shared-types/frontend/core/store.ts"),i=n("./src/ts/script-loader/script-loader.ts"),r=n("./src/ts/utils/inview.ts");const a=()=>{const e={shouldLoadWidget:e=>{var t;return e&&!((null===(t=null===window||void 0===window?void 0:window._TO)||void 0===t?void 0:t._dtmDisableModules)&&window._TO._dtmDisableModules.includes("outbrain"))},loadScripts:async e=>{if(!window._TO.outbrainJSLoaded)try{const t=await(0,i.iM)({src:"https://widgets.outbrain.com/outbrain.js",timeout:"2000",load:"true",parent:"head"});return window._TO.outbrainJSLoaded=!0,e.dispatch({type:o.U.TrackEvent,payload:{pev2:"outbrain script loaded"}}),{outbrain:t}}catch(t){console.error(t),e.dispatch({type:o.U.TrackEvent,payload:{pev2:"outbrain script failed"}})}},createElement:(e,t,n)=>{const o=document.createElement("div");return o.classList.add("OUTBRAIN"),o.dataset.src=e,o.dataset.widgetId=t,n&&(o.dataset.obTemplate=n),o},bindEvents:(t,n)=>{if(!e.shouldLoadWidget(n))return{};const{src:i=window.location.href,widgetId:a,obTemplate:d}=n.dataset;if(!a)return{};if(!1!==window._TO.shouldLoadRecirc&&"AR_21"===a)return{};const s=!0===window._TO.shouldLoadRecirc?"AR_20":!1===window._TO.shouldLoadRecircYmal?"AR_21":a;a!==s&&(n.dataset.widgetId=s);const c=e.createElement(i,s,d);n.insertAdjacentElement("afterbegin",c),e.loadScripts(t),window.OBREvents.push({event:"widgetRendered",widgetId:["AR_1","AR_2","AR_3","AR_4","TR_1","AR_20","AR_21"],func:({widgetId:i})=>{t.dispatch({type:o.U.TrackEvent,payload:{pev2:"outbrain rendered"}});const a="recommender - [label]".replace(/\[label\]/g,"outbrain - "+i.toLowerCase());(0,r.W0)(n,{root:null,rootMargin:"0px",threshold:.5}).then(()=>{t.dispatch({type:o.U.DataLayerPush,payload:{action:"zone - end-of-page",label:a,event:"in-view",category:"GP Impression"}})}),["AR_20","AR_21"].includes(i)&&e.setupClickTracking(t,n,i)}})},setupClickTracking(e,t,n){t.addEventListener("click",t=>{if(!(t.target instanceof Element))return;t.target.closest(".ob-dynamic-rec-link")&&e.dispatch({type:o.U.TrackEvent,payload:{pev2:"recirc click",prop45:"recirc_click_outbrain_"+n}})})},init:(t,n)=>(window._TO=window._TO||{},window.OBREvents=window.OBREvents||[],(0,r.W0)(n,{root:null,rootMargin:"250px",threshold:1}).then(()=>{e.bindEvents(t,n)}),{})};return e},d=(e,t)=>{const n=Math.floor(1e4*Math.random());return{listeners:a().init(t,e),componentId:"outbrain-"+n}}},"./src/ts/utils/inview.ts":(e,t,n)=>{"use strict";n.d(t,{oe:()=>o,oO:()=>i,W0:()=>r});const o=e=>{if(!e)return!1;const t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,i=t.top<=n&&t.top+t.height>=0,r=t.left<=o&&t.left+t.width>=0;return i&&r};function i({element:e,observerOptions:t={},isInViewportCallback:n,isNotInViewportCallback:o}){new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&n&&(o||t.unobserve(e.target),n(e)),!e.isIntersecting&&o&&(n||t.unobserve(e.target),o(e))})},t).observe(e)}function r(e,t){return e?new Promise(n=>{i({element:e,observerOptions:t,isInViewportCallback:n})}):Promise.reject()}}}]);