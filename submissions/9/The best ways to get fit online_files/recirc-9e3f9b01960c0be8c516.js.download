(window.webpackJsonp_gp_web_frontend=window.webpackJsonp_gp_web_frontend||[]).push([["recirc"],{"./src/ts/utils/discover.ts":(e,t,i)=>{"use strict";i.d(t,{fg:()=>c,Ec:()=>l});var a=i("./src/ts/config/config.ts"),r=i("./src/ts/utils/parsely.ts"),s=i("./src/ts/utils/request.ts"),n=i("./src/ts/utils/responsive-image.ts");const c=({uid:e="",size:t=6,from:i,filters:r,sorters:n,multiSearch:c=!1}={})=>{const o=(0,a.u)("site"),l=(0,a.u)("locale"),p=(0,a.u)("discover"),g={size:t};return r&&(g.filters=r.join(",")),n&&(g.sorters=n.join(",")),i&&(g.from=i),c&&(g.multi_search=c.toString()),{url:(0,s.am)({urlPrefix:`${p}/recirc/${o}/${l}/${e}`,params:g})}},o=({index:e,item:t,trackingUID:i,type:a})=>({prop45:`${i}::${e+1}::${t.uid}`,prop60:t.name,pev2:"list "+a,events:["event232"]}),l=({data:e,template:t,trackingUID:i,aspectRatio:a})=>{const s=document.createElement("div");s.appendChild(t.cloneNode(!0));const c=s.innerHTML,l={triggerOn:0,payload:{action:"link - internal",label:"recirculation",category:"GP Engagement",event:void 0}};return e.reduce((e,t,s)=>{const p=(0,r.QI)(t.web_url),g=t.image_url?t.image_url.replace("/image.jpg","/{width}/{height}/image.jpg"):"https://media.timeout.com/images/105716137/{width}/{height}/image.jpg",u=(0,n.J)({pattern:g,aspectRatioKey:a,title:t.name,alt:t.name});return e+c.replace(/\[cta_link\]/g,p).replace(/\[title\]/g,t.name).replace(/\[image\]/g,u).replace(/\[tracking_tile\]/g,JSON.stringify(o({trackingUID:i,type:"tile",index:s,item:t})).replace(/"/g,"&quot;")).replace(/\[gtm_custom_event\]/g,JSON.stringify(l).replace(/"/g,"&quot;")).replace(/\[tracking_image\]/g,JSON.stringify(o({trackingUID:i,type:"image",index:s,item:t})).replace(/"/g,"&quot;")).replace(/\[host_uid\]/g,t.uid)},"")}},"./src/ts/utils/parsely.ts":(e,t,i)=>{"use strict";i.d(t,{qh:()=>s,QI:()=>n,Us:()=>c,qR:()=>o,D8:()=>p,mn:()=>g});var a=i("./src/ts/utils/request.ts"),r=i("./src/ts/utils/responsive-image.ts");const s=({apiKey:e="",url:t,section:i,size:r=16,from:s,sort:n,boost:c,pubDateStart:o,exclude:l})=>{const p={apikey:e,limit:r,url:t,section:i};return s&&(p.page=s),n&&(p.sort=n),c&&(p.boost=c),o&&(p.pub_date_start=o),l&&(p.exclude=l),{url:(0,a.am)({urlPrefix:"https://api.parsely.com/v2/related",params:p})}},n=e=>/checkout.timeout/.test(e)?e:"/"+e.replace(/^(?:\/\/|[^/]+)*\//,""),c=({apiKey:e="",apiPath:t="posts",from:i,pubDateStart:r,secret:s,section:n,size:c=16,sort:o,tag:l})=>{const p="https://api.parsely.com/v2/analytics/"+t,g={apikey:e,limit:c,secret:s,section:n};return i&&(g.page=i),r&&(g.pub_date_start=r),o&&(g.sort=o),l&&(g.tag=l),{url:(0,a.am)({urlPrefix:""+p,params:g})}},o=e=>{var t,i,a;const r=null===(a=null===(i=null===(t=window.digitalData)||void 0===t?void 0:t.page)||void 0===i?void 0:i.pageInfo)||void 0===a?void 0:a.destinationURL;if(!r)return e;const s=new URL(r);return e.filter(({url:e})=>s.pathname!==new URL(e).pathname)},l=({index:e,item:t,trackingUID:i,type:a})=>({prop45:`${i}::${e+1}`,prop60:t.title,pev2:"list "+a,events:["event232"]}),p=({data:e,template:t,trackingUID:i})=>{const a=document.createElement("div");a.appendChild(t.cloneNode(!0));const s=a.innerHTML,c={triggerOn:0,payload:{action:"link - internal",label:"recirculation",category:"GP Engagement",event:void 0}};return e.reduce((e,t,a)=>{const o=t.url,p=n(o),g=t.image_url?t.image_url.replace("/320/210/image.jpg","/{width}/{height}/image.jpg"):"https://media.timeout.com/images/105716137/{width}/{height}/image.jpg",u=(0,r.J)({pattern:g,aspectRatioKey:"4-3",title:t.title,alt:t.title});return e+s.replace(/\[cta_link\]/g,p).replace(/\[title\]/g,t.title).replace(/\[image\]/g,u).replace(/\[tracking_tile\]/g,JSON.stringify(l({trackingUID:i,type:"tile",index:a,item:t})).replace(/"/g,"&quot;")).replace(/\[gtm_custom_event\]/g,JSON.stringify(c).replace(/"/g,"&quot;")).replace(/\[tracking_image\]/g,JSON.stringify(l({trackingUID:i,type:"image",index:a,item:t})).replace(/"/g,"&quot;"))},"")},g=e=>e.replace(" | exclusive London offer by Time Out","").replace(" - London - Time Out","")},"../shared-types/frontend/utils/discover.ts":(e,t,i)=>{"use strict";var a,r;i.d(t,{v:()=>a,R:()=>r}),function(e){e[e.ORContentTypePost=100]="ORContentTypePost",e[e.ORContentTypePage=101]="ORContentTypePage",e[e.ORContentTypeVenue=102]="ORContentTypeVenue",e[e.ORContentTypeEvent=103]="ORContentTypeEvent",e[e.ORContentTypeFilm=108]="ORContentTypeFilm",e[e.ANDCommercialFalse=104]="ANDCommercialFalse",e[e.ANDCommercialTrue=105]="ANDCommercialTrue",e[e.ANDUpdatedAtGte2MAgo=107]="ANDUpdatedAtGte2MAgo",e[e.ANDApplyStarRating=109]="ANDApplyStarRating"}(a||(a={})),function(e){e[e.PublishedAtDesc=200]="PublishedAtDesc",e[e.PublishedAtAsc=201]="PublishedAtAsc",e[e.EndDateDesc=202]="EndDateDesc",e[e.EndDateAsc=203]="EndDateAsc",e[e.UpdatedAtDesc=204]="UpdatedAtDesc",e[e.UpdatedAtAsc=205]="UpdatedAtAsc",e[e.GeoDistanceAsc=206]="GeoDistanceAsc",e[e.PopularityDesc=207]="PopularityDesc",e[e.PopularityAsc=208]="PopularityAsc",e[e.PageViews6HDesc=209]="PageViews6HDesc",e[e.PageViews12HDesc=210]="PageViews12HDesc",e[e.PageViews24HDesc=211]="PageViews24HDesc",e[e.PageViews7DDesc=212]="PageViews7DDesc"}(r||(r={}))}}]);