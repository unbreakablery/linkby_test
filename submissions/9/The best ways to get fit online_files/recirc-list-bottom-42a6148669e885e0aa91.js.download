(window.webpackJsonp_gp_web_frontend=window.webpackJsonp_gp_web_frontend||[]).push([["recirc-list-bottom"],{"./src/ts/components/recirc/recirc-list-bottom.ts":(t,e,n)=>{"use strict";n.r(e),n.d(e,{RecircListBottom:()=>a,init:()=>c});var i=n("../shared-types/frontend/core/store.ts"),o=n("./src/ts/utils/inview.ts"),r=n("./src/ts/utils/parsely.ts"),s=n("./src/ts/utils/request.ts");const a=()=>{const t={getTilesLength:()=>document.querySelector('[data-component="recirc-list-checkout-bottom"]')?8:16,buildTemplate:(e,n)=>{const{wrap:i,template:o}=e;i.insertAdjacentHTML("beforeend",(0,r.D8)({data:n,template:o.content,trackingUID:`recirc_bottom_ymal_${t.getTilesLength()}::`}))},render:(e,n,r)=>{const{data:s=[]}=r;if(!s.length||s.length<2)return{};t.buildTemplate(e,s),e.content.classList.remove("hide"),n.dispatch({type:i.U.RecircListBottomLoaded,payload:{events:["event229"],pev2:"recircloaded_bottom_ymal_"+t.getTilesLength()}});const a="recirculation - [label]".replace(/\[label\]/g,e.heading.textContent.toLowerCase());return(0,o.W0)(e.rootElement).then(()=>{n.dispatch({type:i.U.DataLayerPush,payload:{action:"zone - recirc-list-bottom",label:a,event:"in-view",category:"GP Impression"}})}),{}},getData:async(e,n)=>{var i,o,a,c,l,d,u,p,g,m;try{const{rootElement:h}=e,v=null!==(i=h.dataset.parselyDataId)&&void 0!==i?i:"",w=null!==(o=h.dataset.parselyPubDateStart)&&void 0!==o?o:"",b={apiKey:v,size:t.getTilesLength(),url:null!==(d=null===(l=null===(c=null===(a=window.digitalData)||void 0===a?void 0:a.page)||void 0===c?void 0:c.pageInfo)||void 0===l?void 0:l.destinationURL)&&void 0!==d?d:"",section:null!==(m=null===(g=null===(p=null===(u=window.digitalData)||void 0===u?void 0:u.page)||void 0===p?void 0:p.pageInfo)||void 0===g?void 0:g.city)&&void 0!==m?m:"",sort:"score",from:1,boost:"views",pubDateStart:w,exclude:"tags:Checkout"},y=await(0,s.A_)((0,r.qh)(b));return t.render(e,n,y),y}catch(t){console.error(t)}},bindEvents:(e,n)=>{if(!1===window._TO.shouldLoadRecirc||!1===window._TO.shouldLoadRecircYmal)return{};n.dispatch({type:i.U.RecircListBottomInview,payload:{events:["event229"],pev2:"recircinview_bottom_ymal_"+t.getTilesLength()}});const o=(t=>({rootElement:t,template:t.querySelector("template"),content:t.querySelector(".js_recirc_content"),wrap:t.querySelector(".js_recirc_list_items"),heading:t.querySelector(".js_heading")}))(e);return t.getData(o,n),{}}};return t},c=(t,e)=>{const n=Math.floor(1e4*Math.random());return{listeners:a().bindEvents(t,e),componentId:"recirc-list-bottom-"+n}}},"./src/ts/utils/inview.ts":(t,e,n)=>{"use strict";n.d(e,{oe:()=>i,oO:()=>o,W0:()=>r});const i=t=>{if(!t)return!1;const e=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,o=e.top<=n&&e.top+e.height>=0,r=e.left<=i&&e.left+e.width>=0;return o&&r};function o({element:t,observerOptions:e={},isInViewportCallback:n,isNotInViewportCallback:i}){new IntersectionObserver((t,e)=>{t.forEach(t=>{t.isIntersecting&&n&&(i||e.unobserve(t.target),n(t)),!t.isIntersecting&&i&&(n||e.unobserve(t.target),i(t))})},e).observe(t)}function r(t,e){return t?new Promise(n=>{o({element:t,observerOptions:e,isInViewportCallback:n})}):Promise.reject()}},"./src/ts/utils/responsive-image.ts":(t,e,n)=>{"use strict";var i;n.d(e,{J:()=>r}),function(t){t["4-3"]="auto",t["16-9"]="auto"}(i||(i={}));const o={"4-3":[[380,285],[750,562],[1024,768],[1372,1029]],"16-9":[[400,225],[750,422],[1024,576],[1372,772]]},r=({pattern:t="{width}/{height}",aspectRatioKey:e="4-3",title:n="",alt:r="",imageClass:s=""})=>{const a=((t="{width}/{height}",e="4-3")=>o[e].map(e=>`${t.replace("{width}",e[0].toString()).replace("{height}",e[1].toString())} ${e[0]}w`).join(","))(t,e),[,[c,l]]=o[e];return`<img\n        src="${t.replace("{width}",""+c).replace("{height}",""+l)}"\n        srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="\n        data-sizes="${i[e]}"\n        data-srcset="${a}"\n        class="lazyload ${s} aspect-ratio-${e}"\n        title="${n}"\n        alt="${r}"\n    />`}}}]);